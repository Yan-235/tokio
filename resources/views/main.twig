<!doctype html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Главная</title>

	<link rel="stylesheet" href="/css/materialize.min.css">
	<link rel="stylesheet" href="/css/style.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<script type="text/javascript" src="/js/materialize.min.js"></script>
	<script type="text/javascript" src="/js/jquery-3.3.1.min.js"></script>
	<meta name="csrf-token" content="{{ csrf_token() }}" />
</head>
<body>
{% if salon == 1 %}
	<div align="center">
		<img src="img/logo.png" alt="logo">
	</div>
{% endif %}
{% if salon == 2 %}
	<div align="center">
		<img src="img/city-logo-1.jpg" alt="city-logo-1">
	</div>
{% endif %}
{% if salon == 3 %}
	<div align="center">
		<img src="img/city-logo-2.jpg" alt="city-logo-2">
	</div>
{% endif %}
{% if admin == 1 %}
	<div class="container-fluid is-margin-top-50">
		<div class="row">
			<div class="col s9 left-align">
				<form action="{{ route('change-salon') }}" method="get">
					<div class="col s2">
						<select name="new_salon" required>
							<option value="" disabled selected>Салон</option>
							<option value="1">Токио</option>
							<option value="2">Сити 1</option>
							<option value="3">Сити 2</option>
						</select>
					</div>
					<button type="submit" class="btn waves-effect waves-light green"><i
								class="material-icons">swap_horiz</i></button>
				</form>
			</div>
			<div class="col s1 left-align">
				<form action="{{ route('show-client-list') }}" method="get">
					<button type="submit" class="btn waves-effect waves-light blue"><i
								class="material-icons">people</i></button>
				</form>
			</div>
			<div class="col s1 left-align">
				<form action="{{ route('info-tables') }}" method="get">
					<button type="submit" class="btn waves-effect waves-light blue"><i
								class="material-icons">list</i></button>
				</form>
			</div>
			<div class="col s1 right-align">
				<a href="{{ route('tokio-logout') }}" class="btn waves-effect waves-light red"><i
							class="material-icons">exit_to_app</i></a>
			</div>
		</div>
	</div>
{% else %}
	<div class="container-fluid">
		<div class="row">
			<div class="col s11 right-align">
				<form action="{{ route('show-client-list') }}" method="get">
					<button type="submit" class="btn waves-effect waves-light blue"><i
								class="material-icons">people</i></button>
				</form>
			</div>
			<div class="col s1 right-align">
				<a href="{{ route('tokio-logout') }}" class="btn waves-effect waves-light red"><i
							class="material-icons">exit_to_app</i></a>
			</div>
		</div>
	</div>
{% endif %}
<div class="container is-margin-top-50">
	<ul class="collapsible">
		<li>
			<div class="collapsible-header"><i class="material-icons">add_circle</i>Добавить мастера</div>
			<div class="collapsible-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col s12">
							<form action="{{ route('add-master') }}" method="get">
								<div class="input-field">
									<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
								</div>
								<div class="input-field col s8">
									<input placeholder="Введите имя и фамилию мастера" id="last_name" name="name" type="text"
									       class="validate"
									       required>
								</div>
								<div class="input-field col s2">
									<input placeholder="План" id="plan" name="plan" type="number" min="1"
									       class="validate"
									       required>
								</div>
								<div class="input-field col s2">
									<select name="range" required>
										<option value="" disabled selected>Разряд</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
									</select>
								</div>
								<div class="input-field col s12 text-center">
									<button type="submit" class="waves-effect waves-light btn" href="#">Добавить</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</li>
		<li>
			<div class="collapsible-header"><i class="material-icons">add_circle</i>Добавить услугу</div>
			<div class="collapsible-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col s12">
							<form action="{{ route('add-service-to-salon') }}" method="get">
								<div class="input-field col">
									<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
								</div>
								<div class="input-field col s12 text-center">
									<input placeholder="Название услуги" id="last_name" name="name" type="text" required>
								</div>
								<div class="input-field col s12 text-center">
									<button type="submit" class="waves-effect waves-light btn" href="#">Добавить</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</li>
		<li>
			<div class="collapsible-header"><i class="material-icons">add_circle</i>Добавить товар</div>
			<div class="collapsible-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col s12">
							<form action="{{ route('add-good-to-salon') }}" method="get">
								<div class="input-field col">
									<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
								</div>
								<div class="input-field col s12 text-center">
									<input placeholder="Название товара" id="last_name" name="good_name" type="text" required>
								</div>
								<div class="input-field col s12 text-center">
									<button type="submit" class="waves-effect waves-light btn" href="#">Добавить</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</li>
		<li>


			<div class="col s12">
				<form action="{{ route('show-add-shift') }}">
					<button type="submit" class="collapsible-header" style="width: 100%;"><i class="material-icons is-simple">add</i><i class="material-icons">assignment</i>Добавить
						смену мастеру
					</button>
				</form>
			</div>
		</li>
	</ul>
</div>
<div class="container-fluid">
	<div class="row">
		<div class=" col s12">
			<table class="highlight centered">
				<thead>
				<tr>
					<th>Мастер</th>
					<th> 1</th>
					<th> 2</th>
					<th> 3</th>
					<th> 4</th>
					<th> 5</th>
					<th> 6</th>
					<th> 7</th>
					<th> 8</th>
					<th> 9</th>
					<th>10</th>
					<th>11</th>
					<th>12</th>
					<th>13</th>
					<th>14</th>
					<th>15</th>
					<th>16</th>
					<th>17</th>
					<th>18</th>
					<th>19</th>
					<th>20</th>
					<th>21</th>
					<th>22</th>
					<th>23</th>
					<th>24</th>
					<th>25</th>
					<th>26</th>
					<th>27</th>
					<th>28</th>
					{% if  days_in_month > 28 %}
						<th>29</th>
						{% if days_in_month > 29 %}
							<th>30</th>
							{% if days_in_month > 30 %}
								<th>31</th>
							{% endif %}
						{% endif %}
					{% endif %}
				</tr>
				</thead>

				<tbody>
				{% for master in masters %}
					<tr class="border-0">
						<td class="border-0"><a href="{{ route('master-service',[master.id]) }}" class="waves-effect waves-teal btn-flat
												full-width text-center is-capitalize">{{ master.name }}</a></td>

						{% set count = 0 %}
						{% for type in master.array %}
							{% if  type == 1 %}
								{#
												<td class="black_border"><i
															class="material-icons green_">looks_one</i></td>
											#}
								<td class="black_border font_size_10px"><span>{{ master.starts[count]|date('H:i') }}<br>{{ master.ends[count]|date('H:i') }}</span></td>
								{#
							{% elseif type ==2 %}
												<td class="black_border"><i
															class="material-icons green_">looks_two</i></td>
								<td class="black_border"><span>16<br>20</span></td>
											#}

							{% elseif type ==3 %}
								<td class="black_border"><i
											class="material-icons green_">add_circle</i></td>
							{% elseif type ==0 %}
								<td class="black_border"><i
											class="material-icons red_">remove_circle_outline</i></td>
							{% elseif  type == 11 %}
								{#
												<td class="black_border chosen"><i
															class="material-icons green_">looks_one</i></td>
											#}
								<td class="black_border chosen font_size_10px"><span>{{ master.starts[count]|date('H:i') }}<br>{{ master.ends[count]|date('H:i') }}</span></td>
								{#
							{% elseif type == 12 %}
											<td class="black_border chosen"><i
														class="material-icons green_">looks_two</i></td>
								<td class="black_border chosen"><span>16<br>20</span></td>
											#}
							{% elseif type == 13 %}
								<td class="black_border chosen"><i
											class="material-icons green_">add_circle</i></td>
							{% elseif type == 10 %}
								<td class="black_border  chosen"><i
											class="material-icons red_">remove_circle_outline</i></td>
							{% endif %}
							{% set count = count + 1 %}
						{% endfor %}
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>

{#<div class="container-fluid is-margin-top-50">
	<div class="row">
		<div class="col s12 text-center">
			<form action="{{ route('date-filter') }}" method="get">
				{% if new_filter_date1 == null %}
					<div class="input-field col offset-s3 col s2">
						<input value="{{ theme.getDateEnd|date("Y-m-d") }}" type="date" name="filter_date1">
					</div>
				{% else %}
					<div class="input-field col offset-s3 col s2">
						<input value="{{ new_filter_date1 }}" type="date" name="filter_date1">
					</div>
				{% endif %}
				{% if new_filter_date2 == null %}
					<div class="input-field  col s2">
						<input value="{{ theme.getDateEnd|date("Y-m-d") }}" type="date" name="filter_date2">
					</div>
				{% else %}
					<div class="input-field col s2">
						<input value="{{ new_filter_date2 }}" type="date" name="filter_date2">
					</div>
				{% endif %}
				<div class="col s2">
					<button type="submit" class="waves-effect waves-light btn" href="#">Изменить</button>
				</div>
			</form>
		</div>
	</div>
	<div class="row">
		<div class="col s12 text-center">
			<table class="highlight centered">
				<thead>
				<tr>
					<th>Мастер</th>
					<th>Кол-во смен</th>
					<th>Факт/План</th>
					<th>3/П</th>
					<th>ср. чел</th>
					<th>загруженность</th>
				</tr>
				</thead>

				<tbody>
				{% for master in masters %}
					<tr class="border-0">
						<td class="border-0"><a href="{{ route('master-service',[master.id]) }}" class="waves-effect waves-teal btn-flat
						full-width text-center is-capitalize">{{ master.name }}</a></td>
						<td class="border-0">{{ master.shifts }}</td>
						<td class="border-0">{{ master.cur_hours|number_format(1) }}/{{ master.cur_plan }}</td>
						<td class="border-0">{{ master.current_money }}</td>
						{% if cur_days!=0 %}
							<td class="border-0">{{ (master.services / cur_days)|number_format(2) }}</td>
						{% else %}
							<td class="border-0">0</td>
						{% endif %}
						{% if master.cur_plan!=0 %}
							<td class="border-0">{{ (master.cur_hours / master.cur_plan *100)|number_format(2) }}%</td>
						{% else %}
							<td class="border-0">0%</td>
						{% endif %}
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>#}
{#<div class="container-fluid is-margin-top-50">
	<div class="row">
		<div class="col s12">
			<table class="highlight centered">
				<thead>
				<tr>
					<th>Мастер</th>
					<th>Кол-во смен</th>
					<th>Доход</th>
					<th></th>
					<th></th>
				</tr>
				</thead>

				<tbody>
				{% for master in masters %}
					<tr class="border-0">
						<td class="border-0"><a href="{{ route('master-service',[master.id]) }}" class="waves-effect waves-teal btn-flat
						full-width text-center is-capitalize">{{ master.name }}</a></td>
						<td class="border-0">{{ master.shifts_month }}</td>
						<td class="border-0">{{ master.money }}</td>
						<td class="border-0"><a href="{{ route('delete-user',[master.id]) }}" class="btn waves-effect waves-light red"><i
										class="material-icons"></i>Удалить</a></td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>#}
{#<div class="container-fluid is-margin-top-50">
	<div class="row">
		<div class="col s12 text-center">
			<form action="{{ route('shift-date-filter') }}" method="get">
				{% if new_filter_date == null %}
					<div class="input-field col offset-s4 col s2">
						<input value="{{ theme.getDateEnd|date("Y-m-d") }}" type="date" name="filter_date">
					</div>
				{% else %}
					<div class="input-field col offset-s4 col s2">
						<input value="{{ new_filter_date }}" type="date" name="filter_date">
					</div>
				{% endif %}
				<div class="col s3">
					<button type="submit" class="waves-effect waves-light btn" href="#">Перейти</button>
				</div>
			</form>
		</div>
	</div>
	<div class="row">
		<div class="col offset-s4 col s4">
			<table class="highlight centered">
				<thead>
				<tr>
					<th>Мастер</th>
					<th>Смена</th>
				</tr>
				</thead>

				<tbody>
				{% for master in masters %}
					<tr class="border-0">
						<td class="border-0">{{ master.name }}</td>
						<td class="border-0">
							<form method="get" action="{{ route('add-shift') }}">
								{{ csrf_field() }}
								<input name="master_id" value="{{ master.id }}" hidden>
								<input name="new_filter_date" value="{{ new_filter_date }}" hidden>
								{% if new_filter_date == null %}
									<select name="shift_type" disabled>
										<option value="" disabled selected>{{ master.shifts_today }}</option>
										<option value=0>нету смен</option>
										<option value=1>1-ая смена</option>
										<option value=2>2-ая смена</option>
										<option value=3>целый день</option>
									</select>
								{% else %}
									<select name="shift_type">
										<option value="" disabled selected>{{ master.shifts_today }}</option>
										<option value=0>нету смен</option>
										<option value=1>1-ая смена</option>
										<option value=2>2-ая смена</option>
										<option value=3>целый день</option>
									</select>
								{% endif %}
								<button type="submit" class="waves-effect waves-light btn" href="#">Сохранить</button>
							</form>
						</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>#}
<input id="exception1" value="{{ exception1 }}" hidden>

<script type="text/javascript" src="/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/js/materialize.min.js"></script>

<script>
	if(document.getElementById("exception1").value != '') {
		alert(document.getElementById("exception1").value);
	}

	$(document).ready(function() {
		$('select').formSelect();
	});
	$(document).ready(function() {
		$('.datepicker').datepicker();
	});
	$(document).ready(function() {
		$('.collapsible').collapsible();
	});

</script>

</body>
</html>